# Zero Angular

Zero Angular provides small, well-architected integration utilities and components that make using Zero (https://zero.rocicorp.dev/) from Angular apps easy and idiomatic.

This repository contains an Angular library package: `@nathanld/zero-angular`.

## Package

- Package name: `@nathanld/zero-angular`
- Purpose: Angular bindings and helpers for the Zero local-first platform
- Peer dependencies: `@angular/common`, `@angular/core`, `@rocicorp/zero`
- Optional peer dependency: `effect` (EffectTS) — the library provides optional adapters if Effect is present.

## Installation

Install into your application:

```bash
bun add @nathanld/zero-angular
# or npm
npm install @nathanld/zero-angular
```

If you want Effect integration install Effect:

```bash
bun add effect
# or npm
npm install effect
```

## Usage

This library is a set of Angular utilities and small components. Typical usage looks like:

- Import and provide the Zero instance in your app (example omitted — follow Zero docs for creating a `Z` instance)
- Use library helpers to create typed queries and bind results to signals and components

See the `projects/zero-angular/src` source for examples and exported APIs.

## Development

This workspace is a library-only Angular workspace. There is no application to `ng serve` — the workspace ships a library package that should be built for distribution.

Common commands (run with Bun):

- `bunx build` — Builds the library (`ng build zero-angular`).
- `bunx test` — Run unit tests.
- `bunx changeset` — Create a changeset for releases.
- `bunx changeset version` — Apply versions for a release.
- `bunx changeset publish --dry-run` — Validate publish without publishing.

Notes:
- The root workspace no longer exposes `ng serve` because libraries are not served.
- The `prepare` script builds the library before publishing.

## Angular Best Practices Followed

- Standalone components and services
- Use `inject()` instead of constructor injection where appropriate
- Use Signals for local component state and `computed()` for derived state
- `ChangeDetectionStrategy.OnPush` is used for components
- Prefer inline templates for small components and `NgOptimizedImage` for static images

## EffectTS Optional Integration

This package supports optional integration with EffectTS. The `effect` package is declared as an optional peer dependency and library exports adapters that will be available when `effect` is installed in the host application.

Example (pseudo):

```ts
// If you use Effect, you can import `createEffectAdapter` from the library
import { createEffectAdapter } from '@nathanld/zero-angular';
```

If `effect` is not installed, those exports are harmlessly unused.

## Publishing

This project uses Changesets to manage releases and a GitHub Actions workflow to run `bunx changeset version` and `bunx changeset publish --dry-run`.

To prepare a release locally:

1. Create a changeset: `bunx changeset`
2. Apply versions: `bunx changeset version`
3. Verify package contents: `npm pack` or `bunx changeset publish --dry-run`.

Do not publish without verifying contents and the version.

## Contributing

- Run `bun install` to install dependencies.
- Run `bunx changeset` when you modify public API to create a release note.
- Make sure `dist/` is generated by running `bunx build` before publishing.

## Changelog

See `CHANGELOG.md` for a human-readable history.

## License

MIT
